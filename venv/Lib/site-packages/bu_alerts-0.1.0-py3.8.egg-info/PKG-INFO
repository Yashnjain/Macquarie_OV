Metadata-Version: 2.1
Name: bu-alerts
Version: 0.1.0
Summary: Common alert module for Biourja Group!
Home-page: https://gitlab.com/bu_it/bu_alerts
Author: chetanbiourja
Author-email: chetan.surwade@biourja.com
License: mit
Project-URL: Documentation, https://gitlab.com/bu_it/bu_alerts/-/blob/master/README.rst
Description: =========
        bu_alerts
        =========
        
        
        Common alert module for Biourja Group!
        
        
        Description
        ===========
        
        Common alert module for Biourja Group, which can utilized to send_mail,bulog,add_file_logging
        
        Installation/Upgradation
        =====
        
        ``python -m pip install git+https://gitlab.com/biourjapower/bu_alerts.git@v0.1.0 --upgrade --force-reinstall``
        
        Usage
        =====
        
        .. code-block:: python
        
            if __name__ == "__main__":
        
                DATABASE = "POWERDB"
                SCHEMA = "PVIRTUALS"
                ROLE = "OWNER_POWERDB"
                WAREHOURSE = "VIRTUALS_WH"
                logger = logging.getLogger()
                logger.setLevel(logging.INFO)
                logfilename = bu_alerts.add_file_logging(logger,process_name='spp_congestion_model')
        
                engine = sqlalchemy.engine.Engine
                try:
                    engine = bu_snowflake.get_engine(
                        warehouse=WAREHOURSE,
                        role=ROLE,
                        schema=SCHEMA,
                        database=DATABASE
                    )
                    bu_alerts.bulog(
                        process_name='SPP_CONGESTION_MODEL',
                        status='started',
                        table_name='SPP_CONGESTION_FORECAST',
                        # process_owner='chetan',
                        row_count=0,
                        engine=engine,
                        warehouse=WAREHOURSE,
                        database=DATABASE
        
                    )
                    main()
                    bu_alerts.bulog(
                        process_name='SPP_CONGESTION_MODEL',
                        status='completed',
                        table_name='SPP_CONGESTION_FORECAST',
                        # process_owner='chetan',
                        row_count=0,
                        engine=engine,
                        warehouse=WAREHOURSE,
                        database=DATABASE
        
                    )
                    bu_alerts.send_mail(
                        receiver_email="indiapowerit@biourja.com",
                        mail_subject="Job Success - SPP_CONGESTION_MODEL",
                        mail_body=f"Process teminated successfully, Attached logs",
                        attachment_location=logfilename
                    )
                except Exception as e:
                    logger.exception(f'Error occurred in SPP_CONGESTION_MODEL. {e}')
                    bu_alerts.bulog(
                        process_name='SPP_CONGESTION_MODEL',
                        status='failed',
                        table_name='SPP_CONGESTION_FORECAST',
                        # process_owner='chetan',
                        row_count=0,
                        engine=engine,
                        warehouse=WAREHOURSE,
                    )
                    bu_alerts.send_mail(
                        receiver_email="indiapowerit@biourja.com",
                        mail_subject="Job Failed - SPP_CONGESTION_MODEL",
                        mail_body=f"Process teminated with error {e}, Attached logs",
                        attachment_location=logfilename
                    )
                finally:
                    engine.dispose()
        
Platform: any
Classifier: Development Status :: 5 - Production/Stable
Classifier: Programming Language :: Python
Description-Content-Type: text/x-rst; charset=UTF-8
Provides-Extra: testing
